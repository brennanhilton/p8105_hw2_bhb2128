---
title: "homework2"
author: "Brennan Baker"
date: "September 26, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Import packages.
```{r packages}
library(tidyverse)
library(readxl)
```

## Problem 1

Read and clean the data; retain line, station, name, station latitude / longitude, routes served, entry, vending, entrance type, and ADA compliance. Convert the entry variable from character (YES vs NO) to a logical variable (the ifelse or recode function may be useful).

```{r import data}
subway_data <- read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line, station_name, station_latitude, station_longitude, starts_with("route"), entry, entrance_type, vending, ada) %>% 
  mutate(entry = recode(entry, 'YES' = TRUE, 'NO' = FALSE))

```

This dataset contains NYC subway entrance and exit data. After importing the data, I cleaned the names and eliminated unnecessary variables. The resulting dataset contains the following variables: the line and station names, the longitude and latitude of each station, the routes that each station serves, whether or not each station allows entrance (entry), vending, and ADA compliance, and the type of entry. I changed the coding of the entry variable from YES/NO to TRUE/FALSE. The dataset contains `r nrow(subway_data)` rows and `r ncol(subway_data)` columns. The data set is almost tidy because the columns are variables and the rows are observations. However, the route number columns contain information about two variables, the number of the route and the name of the route.

```{r}
distinct_stations = subway_data %>% distinct(line, station_name, .keep_all = TRUE)
```

There are `r nrow(distinct_stations)` distinct stations.

```{r}
ada_compliant = filter(distinct_stations, ada == TRUE)
```

There are `r nrow(ada_compliant)` ADA compliant stations.

```{r}
no_vending_allow_entry = subway_data %>% #move back to subway_data because each station has multiple entrances
  filter(vending == "NO") %>% 
  filter(entry == TRUE)
  
```

There are `r nrow(no_vending_allow_entry)` station entrances / exits without vending that allow entrance.

```{r}
tidy_subway_data = subway_data %>% 
  gather(key = route_number, value = route_name, route1:route11) %>% 
  separate(route_number, into = c("remove", "route_number"), sep = "e") %>% 
  select(-remove)
```

```{r}
tidy_distinct_stations = tidy_subway_data %>% 
  distinct(line, station_name, .keep_all = TRUE)


a_train = tidy_distinct_stations %>% 
  filter(route_name == "A")

ada_compliant2 = filter(tidy_distinct_stations, ada == TRUE)
```

There are `r nrow(a_train)` distinct stations that serve the A.
There are `r nrow(ada_compliant2)` ADA compliant stations (this question was asked twice).

## Problem 2

```{r}
trash_data = read_excel(path = "./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "Mr. Trash Wheel", range = cell_cols("A:M")) %>% 
  janitor::clean_names() %>% 
  mutate(sports_balls = round(sports_balls)) %>% 
  mutate(sports_balls = as.integer(sports_balls))

trash_data_2016 = trash_data %>% 
   filter(year == "2016")
```

The trash_data dataset contains about Mr. Trash Wheel, a contraption that removes trash from the Inner harbor in Baltimore, Maryland. The data set has `r nrow(trash_data)` rows and `r ncol(trash_data)` columns. The data set details the weight and volume of trash collected by Mr. Trash Wheel into various dumpsters each month from May 2014 through August 2017. The type of trash is broken down into several categories including plastic bottels, grocery bags, sports balls, and several other trash types. The median number of sports balls per dumpster in 2016 was `r summarise(trash_data_2016, median(sports_balls))`.

```{r}
rain_2016 = read_excel(path = "./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "2016 Precipitation", range = cell_rows(2:14)) %>% 
  janitor::clean_names() %>%
  drop_na() %>% 
  mutate(year = "2016")

rain_2017 = read_excel(path = "./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "2017 Precipitation", range = cell_rows(2:14)) %>% 
  janitor::clean_names() %>%
  drop_na() %>% 
  mutate(year = "2017")

rain_data = bind_rows(rain_2016, rain_2017) %>% 
  mutate(month = month.name[month])
```


Write a paragraph about these data; you are encouraged to use inline R. Be sure to note the number of observations in both resulting datasets, and give examples of key variables. For available data, what was the total precipitation in 2017? What was the median number of sports balls in a dumpster in 2016 
