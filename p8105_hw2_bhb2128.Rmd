---
title: "homework2"
author: "Brennan Baker"
date: "September 26, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Import packages.
```{r packages}
library(tidyverse)
```

## Problem 1

Read and clean the data; retain line, station, name, station latitude / longitude, routes served, entry, vending, entrance type, and ADA compliance. Convert the entry variable from character (YES vs NO) to a logical variable (the ifelse or recode function may be useful).

```{r import data}
subway_data <- read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line, station_name, station_latitude, station_longitude, starts_with("route"), entry, entrance_type, vending, ada) %>% 
  mutate(entry = recode(entry, 'YES' = TRUE, 'NO' = FALSE))

```

This dataset contains NYC subway entrance and exit data. After importing the data, I cleaned the names and eliminated unnecessary variables. The resulting dataset contains the following variables: the line and station names, the longitude and latitude of each station, the routes that each station serves, whether or not each station allows entrance (entry), vending, and ADA compliance, and the type of entry. I changed the coding of the entry variable from YES/NO to TRUE/FALSE. The dataset contains `r nrow(subway_data)` rows and `r ncol(subway_data)` columns. The data set is almost tidy because the columns are variables and the rows are observations. However, the route number columns contain information about two variables, the number of the route and the name of the route.

```{r}
distinct_stations = subway_data %>% distinct(line, station_name, .keep_all = TRUE)
```

There are `r nrow(distinct_stations)` distinct stations.

```{r}
ada_compliant = filter(distinct_stations, ada == TRUE)
```

There are `r nrow(ada_compliant)` ADA compliant stations.

```{r}
no_vending_allow_entry = subway_data %>% #move back to subway_data because each station has multiple entrances
  filter(vending == "NO") %>% 
  filter(entry == TRUE)
  
```

There are `r nrow(no_vending_allow_entry)` station entrances / exits without vending that allow entrance.

```{r}
tidy_subway_data = subway_data %>% 
  gather(key = route_number, value = route_name, route1:route11) %>% 
  separate(route_number, into = c("remove", "route_number"), sep = "e") %>% 
  select(-remove)
```

```{r}
tidy_distinct_stations = tidy_subway_data %>% 
  distinct(line, station_name, .keep_all = TRUE)


a_train = tidy_distinct_stations %>% 
  filter(route_name == "A")

ada_compliant2 = filter(tidy_distinct_stations, ada == TRUE)
```

There are `r nrow(a_train)` distinct stations that serve the A.
There are `r nrow(ada_compliant2)` ADA compliant stations (this question was asked twice).

Problem 1



Answer the following questions using these data:

How many distinct stations are there? Note that stations are identified both by name and by line (e.g. 125th St A/B/C/D; 125st 1; 125st 4/5); the distinct function may be useful here.
How many stations are ADA compliant?
What proportion of station entrances / exits without vending allow entrance?
Reformat data so that route number and route name are distinct variables. How many distinct stations serve the A train? How many are ADA compliant?